<?xml version="1.0" encoding="UTF-8"?>
<hibernate-mapping package="org.n52.series.db.beans"
    xmlns="http://www.hibernate.org/xsd/hibernate-mapping"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.hibernate.org/xsd/hibernate-mapping http://www.hibernate.org/xsd/hibernate-mapping/hibernate-mapping-4.0.xsd">
    <subclass name="QuantityDatasetEntity" extends="DatasetEntity" discriminator-value="quantity" >
        <property name="numberOfDecimals" type="int">
            <column name="decimals">
                <comment>Number of decimals that should be present in the data/observation values</comment>
            </column>
        </property>
        <many-to-one class="UnitEntity" column="fk_unit_id" name="unit" foreign-key="fk_dataset_unit"/>
        <many-to-one class="QuantityDataEntity" column="fk_first_observation_id" name="firstObservation" fetch="select" foreign-key="fk_dataset_first_obs"/>
        <many-to-one class="QuantityDataEntity" column="fk_last_observation_id" name="lastObservation" fetch="select" foreign-key="fk_dataset_last_obs"/>
        <list name="referenceValues" table="dataset_reference" inverse="false">
            <comment>Storage of referenced datasets, e.g. level zero, medium water level,etc. for water level </comment>
            <key not-null="true" foreign-key="fk_dataset_reference_from">
                <column name="fk_dataset_id_from">
                    <comment>Reference to the dataset that has referenced datasets</comment>
                </column>
            </key>
            <list-index>
                <column name="sort_order">
                     <comment>Provides the sort order for the referenced datasets.</comment>
                </column>
            </list-index>
            <many-to-many class="DatasetEntity" foreign-key="fk_dataset_reference_to">
                <column name="fk_dataset_id_to">
                    <comment>Reference to the dataset that is the reference</comment>
                </column>
            </many-to-many>
        </list>
    </subclass>
</hibernate-mapping>
